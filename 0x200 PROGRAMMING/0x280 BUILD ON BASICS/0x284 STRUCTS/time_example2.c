#include <stdio.h>
#include <time.h>

void dump_struct( struct tm *time_ptr, unsigned int size )
{
    int i;
    unsigned char *raw_ptr;
    printf("Bytes at '%p' \n",time_ptr);
    raw_ptr = (unsigned char*) time_ptr;

    for ( i = 0; i < size; i++ )
    {
        printf("%02x ",raw_ptr[i]);
        if ( i%16 == 15 )
            printf("\n");
    }
    printf("\n");
}

int main()
{
    int hr,min,sec,*int_ptr;
    long int sec_since_epoch;
    struct tm current_time,*time_ptr;
    
    sec_since_epoch = time(0);
    printf("time() - Seconds since epoch = %ld\n",sec_since_epoch);
    
    time_ptr = &current_time;
    
    localtime_r( &sec_since_epoch,time_ptr );
    
    hr = current_time.tm_hour;
    min = time_ptr->tm_min;
    sec = *((int *) time_ptr );
    
    printf("Current time is %02d:%02d:%02d\n",hr,min,sec);
    
    dump_struct( time_ptr, sizeof(struct tm) );
    
    min = hr = 0;
    int_ptr = (int *)time_ptr;
    
    for( int i = 0; i < 3; i++ )
    {
         printf("int+ptr @ '%p' --> %d\n",int_ptr,*int_ptr);
         int_ptr++;
    }
}
